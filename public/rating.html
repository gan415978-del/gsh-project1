<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Рейтинг - GSH</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%234683d9'/%3E%3Ctext x='50' y='70' font-family='Arial, sans-serif' font-size='45' font-weight='bold' fill='white' text-anchor='middle'%3EGSH%3C/text%3E%3C/svg%3E" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
    <style>
      /* Возвращаем скругления первому посту, так как тут нет меню фильтров сверху */
      #posts-container .post-card:first-child {
        border-top-left-radius: 12px !important;
        border-top-right-radius: 12px !important;
        border-top: 1px solid transparent !important;
      }
      /* Возвращаем подсветку рамки при наведении */
      #posts-container .post-card:first-child:hover {
        border-color: #333 !important;
      }
    </style>
  </head>
  <body>
    <header class="header">
      <div class="header-container">
        <a href="index.html" class="logo">GSH</a>
        <button
          class="btn-back-header"
          id="btn-back-header"
          style="display: none"
        >
          <i class="fa-solid fa-chevron-left"></i>
        </button>
        <div class="header-actions">
          <div class="search-wrapper" id="search-wrapper">
            <input
              type="text"
              class="search-input-dynamic"
              id="header-search-input"
              placeholder="Поиск..."
            />
            <button class="search-btn-icon" id="search-trigger">
              <i class="fa-solid fa-magnifying-glass"></i>
            </button>
          </div>
          <button class="notification-bell" id="notification-bell" style="display: none;">
            <i class="fa-solid fa-bell"></i>
            <span class="notification-badge" id="notification-badge" style="display: none;">0</span>
          </button>
          <div
            id="auth-container"
            style="display: flex; align-items: center; gap: 15px"
          ></div>
        </div>
      </div>
    </header>

    <!-- Модальное окно уведомлений -->
    <div class="notifications-modal" id="notifications-modal">
      <div class="notifications-header">
        <h3>Уведомления</h3>
        <button class="mark-all-read-btn" id="mark-all-read-btn">Отметить все как прочитанные</button>
      </div>
      <div class="notifications-list" id="notifications-list">
        <!-- Уведомления будут загружены динамически -->
      </div>
    </div>

    <div class="main-layout">
      <aside class="sidebar-left">
        <nav class="nav-menu">
          <a href="index.html" class="nav-item"
            ><i class="fa-solid fa-fire"></i> Популярное</a
          >
          <a href="fresh.html" class="nav-item"
            ><i class="fa-regular fa-clock"></i> Свежее</a
          >
          <a href="feed.html" class="nav-item"
            ><i class="fa-regular fa-bookmark"></i> Моя лента</a
          >
          <a href="messages.html" class="nav-item"
            ><i class="fa-regular fa-comments"></i> Сообщения</a
          >
          <a href="rating.html" class="nav-item"
            ><i class="fa-solid fa-chart-simple"></i> Рейтинг</a
          >
        </nav>
        <div class="nav-divider"></div>
        <div class="nav-topics">
          <div class="topics-header">
            Темы
            <span
              id="admin-add-topic-btn"
              style="
                float: right;
                cursor: pointer;
                display: none;
                color: #4683d9;
              "
              ><i class="fa-solid fa-plus"></i
            ></span>
          </div>
          <div id="topics-list-sidebar"></div>
        </div>
      </aside>

      <main class="content-feed">
        <h2>Рейтинг сообщества</h2>

        <div
          class="rating-block"
          style="
            background: #191919;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
          "
        >
          <h3 style="margin-bottom: 15px">Самые активные авторы:</h3>
          <div
            id="top-users-list"
            style="display: flex; gap: 15px; overflow-x: auto"
          ></div>
          <div
            id="show-more-authors"
            style="text-align: center; margin-top: 15px; color: #4683d9; cursor: pointer; font-size: 14px; display: none;"
          >
            Показать больше
          </div>
        </div>

        <div
          class="rating-block"
          style="
            background: #191919;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
          "
        >
          <h3 style="margin-bottom: 15px">Популярные темы:</h3>
          <div
            id="top-topics-list"
            style="display: flex; gap: 15px; overflow-x: auto"
          ></div>
          <div
            id="show-more-topics"
            style="text-align: center; margin-top: 15px; color: #4683d9; cursor: pointer; font-size: 14px; display: none;"
          >
            Показать больше
          </div>
        </div>

        <h3 style="margin-top: 30px; margin-bottom: 20px">
          Рекомендации для вас:
        </h3>
        <div id="posts-container"></div>
      </main>

      <aside class="sidebar-right">
        <div class="top-blogs-card">
          <h3>Топ Авторов</h3>
          <ul class="blog-list" id="top-authors-list">
            <div style="padding: 10px; color: #666; font-size: 13px">
              Загрузка...
            </div>
          </ul>
          <a href="rating.html" class="view-all">Посмотреть весь рейтинг</a>
        </div>

        <div class="footer-links">
          <div class="copyright">© GSH 2025</div>
        </div>
      </aside>
    </div>

    <div id="topic-modal" class="modal-overlay">
      <div class="modal-window">
        <button class="modal-close"><i class="fa-solid fa-xmark"></i></button>
        <h2 class="auth-title" id="topic-modal-title">Настройки темы</h2>
        <div class="input-group">
          <input
            type="text"
            id="topic-name-input"
            placeholder="Название"
            required
          />
        </div>
        <div class="input-group">
          <input
            type="text"
            id="topic-desc-input"
            placeholder="Описание"
            required
          />
        </div>
        <div
          style="
            margin-top: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <button
            class="btn-action"
            id="btn-save-topic"
            style="width: auto; padding: 10px 20px"
          >
            Сохранить
          </button>
          <button
            id="btn-admin-delete-topic"
            style="
              background: transparent;
              border: none;
              color: #ff5e5e;
              cursor: pointer;
              font-size: 14px;
            "
          >
            Удалить тему
          </button>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
    <div id="auth-modal" class="modal-overlay">
      <div class="modal-window">
        <button class="modal-close"><i class="fa-solid fa-xmark"></i></button>

        <div class="auth-screen active" id="screen-start">
          <div class="auth-logo">GSH</div>
          <h2 class="auth-title">Вход в аккаунт</h2>
          <div class="auth-buttons">
            <button class="btn-social">
              <i class="fa-brands fa-google"></i> Google
            </button>
            <button class="btn-social" id="btn-to-email">
              <i class="fa-regular fa-envelope"></i> Почта
            </button>
          </div>
          <div class="auth-footer-link">
            Нет аккаунта? <span id="link-to-reg">Регистрация</span>
          </div>
        </div>

        <form class="auth-screen" id="screen-login">
          <button
            type="button"
            class="btn-back"
            onclick="document.getElementById('screen-login').classList.remove('active'); document.getElementById('screen-start').classList.add('active');"
          >
            <i class="fa-solid fa-chevron-left"></i>
          </button>

          <h2 class="auth-title">Вход</h2>
          <div class="input-group">
            <input type="email" id="login-email" placeholder="Email" required />
          </div>
          <div class="input-group">
            <input
              type="password"
              id="login-password"
              placeholder="Пароль"
              required
            />
          </div>
          <button type="submit" class="btn-action">Войти</button>
          <div class="form-message" id="msg-login"></div>
        </form>

        <form class="auth-screen" id="screen-register">
          <button
            type="button"
            class="btn-back"
            onclick="document.getElementById('screen-register').classList.remove('active'); document.getElementById('screen-start').classList.add('active');"
          >
            <i class="fa-solid fa-chevron-left"></i>
          </button>

          <h2 class="auth-title">Регистрация</h2>
          <div class="input-group">
            <input
              type="text"
              id="reg-name"
              placeholder="Имя пользователя"
              required
            />
          </div>
          <div class="input-group">
            <input type="email" id="reg-email" placeholder="Email" required />
          </div>
          <div class="input-group">
            <input
              type="password"
              id="reg-password"
              placeholder="Пароль"
              required
            />
          </div>
          <button type="submit" class="btn-action">Создать аккаунт</button>
          <div class="form-message" id="msg-register"></div>
        </form>
      </div>
    </div>

    <div id="post-editor-modal" class="modal-overlay">
      <div class="editor-window">
        <div class="editor-header">
          <div class="editor-user-info">
            <div class="editor-meta">
              <div class="editor-author" id="editor-user-name">User</div>
              <div class="editor-topic-selector" id="topic-trigger">
                <span id="selected-topic-name">Без темы</span>
                <i class="fa-solid fa-chevron-down"></i>
              </div>
              <div class="topic-dropdown" id="topic-dropdown">
                <div class="topic-option" data-id="1">Скриншоты</div>
                <div class="topic-option" data-id="2">Гайды</div>
                <div class="topic-option" data-id="3">Фоторежим</div>
                <div class="topic-option" data-id="4">Железо</div>
              </div>
            </div>
          </div>
          <button class="icon-btn close-editor">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>

        <div class="editor-body">
          <input
            type="text"
            class="editor-title-input"
            id="post-title"
            placeholder="Заголовок"
          />

          <div class="editor-image-section">
            <input
              type="file"
              id="file-input"
              accept="image/*"
              multiple
              style="display: none"
            />
            <div
              id="images-preview-container"
              class="images-preview-grid"
            ></div>
            <div id="upload-placeholder" class="upload-placeholder">
              <i class="fa-regular fa-image"></i>
              <span>Загрузить до 15 скриншотов</span>
              <div style="font-size: 12px; color: #888; margin-top: 5px">
                <span id="images-counter">0/15</span>
              </div>
            </div>
          </div>

          <textarea
            class="editor-content-input"
            id="post-content"
            placeholder="Комментарий..."
          ></textarea>
        </div>

        <div class="editor-footer">
          <div class="editor-footer-left">
            <button class="btn-publish" id="btn-publish-post">
              Опубликовать
            </button>
          </div>
        </div>
      </div>
    </div>
    <div id="post-editor-modal" class="modal-overlay">
      <div class="editor-window">
        <div class="editor-header">
          <div class="editor-user-info">
            <img
              src="https://placehold.co/40"
              class="editor-avatar"
              id="editor-user-avatar"
            />
            <div class="editor-meta">
              <div class="editor-author" id="editor-user-name">
                Имя Пользователя
              </div>
              <div class="editor-topic-selector" id="topic-trigger">
                <span id="selected-topic-name">Без темы</span>
                <i class="fa-solid fa-chevron-down"></i>
              </div>

              <div class="topic-dropdown" id="topic-dropdown">
                <div class="topic-option" data-id="1">Скриншоты</div>
                <div class="topic-option" data-id="2">Гайды</div>
                <div class="topic-option" data-id="3">Фоторежим</div>
                <div class="topic-option" data-id="4">Железо</div>
              </div>
            </div>
          </div>
          <div class="editor-controls">
            <button class="icon-btn"><i class="fa-solid fa-expand"></i></button>
            <button class="icon-btn close-editor">
              <i class="fa-solid fa-xmark"></i>
            </button>
          </div>
        </div>

        <div class="editor-body">
          <input
            type="text"
            class="editor-title-input"
            id="post-title"
            placeholder="Заголовок"
          />

          <div class="editor-image-section">
            <input
              type="file"
              id="file-input"
              accept="image/*"
              style="display: none"
            />

            <div id="image-preview-container" style="display: none">
              <img src="" id="image-preview" />
              <button id="btn-remove-image">
                <i class="fa-solid fa-trash"></i>
              </button>
            </div>

            <div id="upload-placeholder" class="upload-placeholder">
              <i class="fa-regular fa-image"></i>
              <span>Загрузить скриншот</span>
            </div>
          </div>

          <textarea
            class="editor-content-input"
            id="post-content"
            placeholder="Добавьте описание или комментарий..."
          ></textarea>
        </div>

        <div class="editor-footer">
          <div class="editor-footer-left">
            <button class="btn-publish" id="btn-publish-post">
              Опубликовать
            </button>
            <button class="icon-btn">
              <i class="fa-regular fa-comment"></i>
            </button>

            <div class="menu-wrapper">
              <button class="icon-btn" id="editor-menu-btn">
                <i class="fa-solid fa-ellipsis"></i>
              </button>
              <div class="popup-menu" id="editor-menu">
                <div class="menu-item">
                  <i class="fa-regular fa-eye"></i> Предпросмотр
                </div>
                <div class="menu-item">
                  <i class="fa-solid fa-1"></i
                  ><i class="fa-solid fa-8"></i> Отметить 18+
                </div>
                <div class="menu-item">
                  <i class="fa-solid fa-clock-rotate-left"></i> История версий
                </div>
                <div class="menu-item text-red">
                  <i class="fa-regular fa-trash-can"></i> Удалить
                </div>
              </div>
            </div>

            <span class="save-status"
              >Сохранено <i class="fa-solid fa-check"></i
            ></span>
          </div>
        </div>
      </div>
    </div>
    <div id="post-viewer-modal" class="post-viewer-modal">
      <div class="viewer-content">
        <div class="viewer-main">
          <div class="viewer-post-header">
            <div class="viewer-post-author">
              <a
                href="#"
                id="viewer-author-avatar-link"
                style="text-decoration: none"
              >
                <img
                  src=""
                  id="viewer-author-avatar"
                  style="
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    object-fit: cover;
                    cursor: pointer;
                  "
                />
              </a>
              <div style="flex: 1">
                <div style="display: flex; align-items: center; gap: 15px">
                  <a
                    href="#"
                    id="viewer-author-name-link"
                    style="text-decoration: none"
                  >
                    <div
                      id="viewer-author-name"
                      style="font-weight: 700; color: #fff; cursor: pointer"
                    >
                      Имя
                    </div>
                  </a>
                  <span style="color: #555">•</span>
                  <div
                    id="viewer-post-date"
                    style="font-size: 13px; color: #888"
                  >
                    Дата
                  </div>
                </div>
                <a
                  href="#"
                  id="viewer-post-category-link"
                  style="text-decoration: none"
                >
                  <div
                    id="viewer-post-category"
                    style="
                      font-size: 13px;
                      color: #888;
                      cursor: pointer;
                      margin-top: 2px;
                    "
                  >
                    Тема
                  </div>
                </a>
              </div>
            </div>
            <div style="display: flex; align-items: center; gap: 10px">
              <div style="position: relative">
                <button
                  class="viewer-menu-btn"
                  id="viewer-post-menu-btn"
                  style="display: none"
                >
                  <i class="fa-solid fa-ellipsis"></i>
                </button>
                <div class="viewer-post-menu" id="viewer-post-menu">
                  <div class="viewer-menu-item" id="viewer-edit-post">
                    <i class="fa-solid fa-pen"></i> Редактировать
                  </div>
                  <div class="viewer-menu-item danger" id="viewer-delete-post">
                    <i class="fa-solid fa-trash"></i> Удалить
                  </div>
                </div>
              </div>
              <button class="viewer-close-btn" id="btn-close-viewer">
                <i class="fa-solid fa-xmark"></i>
              </button>
            </div>
          </div>

          <div class="viewer-post-title-section">
            <h2 id="viewer-post-title">Заголовок</h2>
          </div>

          <div class="viewer-image-container" id="viewer-post-image-box"></div>

          <div class="viewer-post-text">
            <div id="viewer-post-content">Текст поста...</div>
          </div>
        </div>

        <div class="viewer-sidebar">
          <div class="viewer-comments-header">
            <span>Комментарии</span>
            <div class="viewer-header-actions">
              <button
                class="viewer-action-btn-mini action-like"
                id="viewer-like-btn"
                data-id="0"
              >
                <i class="fa-regular fa-heart"></i>
                <span id="viewer-likes-count">0</span>
              </button>
              <button
                class="viewer-action-btn-mini action-bookmark"
                id="viewer-bookmark-btn"
                data-id="0"
              >
                <i class="fa-regular fa-bookmark"></i>
                <span id="viewer-bookmarks-count">0</span>
              </button>
              <div class="viewer-action-btn-mini disabled">
                <i class="fa-regular fa-eye"></i>
                <span id="viewer-views-count">0</span>
              </div>
            </div>
          </div>
          <div class="viewer-comments-list" id="viewer-comments-list"></div>
          <div class="viewer-footer">
            <div class="viewer-input-wrapper">
              <input
                type="text"
                class="viewer-input"
                id="viewer-comment-input"
                placeholder="Написать комментарий..."
              />
              <button class="btn-send" id="btn-send-comment">Отправить</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Модальное окно удаления поста -->
    <div id="delete-modal" class="modal-overlay">
      <div class="modal-window" style="max-width: 360px">
        <h3 class="modal-title">Удаление</h3>
        <p class="modal-text">
          Вы уверены, что хотите удалить этот пост? Это действие нельзя
          отменить.
        </p>
        <div class="modal-actions">
          <button class="btn-modal btn-cancel" id="btn-cancel-delete">
            Отмена
          </button>
          <button class="btn-modal btn-danger" id="btn-confirm-delete">
            Удалить
          </button>
        </div>
      </div>
    </div>

    <!-- Модальное окно удаления комментария -->
    <div id="delete-comment-modal" class="modal-overlay">
      <div class="modal-window-modern">
        <h3 class="modal-title-modern">Удаление</h3>
        <p class="modal-text-modern">Подтвердите действие</p>
        <div class="modal-actions-modern">
          <button
            class="btn-modal-modern btn-cancel-modern"
            id="btn-cancel-delete-comment"
          >
            Отмена
          </button>
          <button
            class="btn-modal-modern btn-danger-modern"
            id="btn-confirm-delete-comment"
          >
            Удалить
          </button>
        </div>
      </div>
    </div>

    <!-- Полноэкранный просмотр изображений -->
    <div id="fullscreen-viewer" class="fullscreen-viewer">
      <button class="fullscreen-close" id="fullscreen-close-btn">
        <i class="fa-solid fa-xmark"></i>
      </button>
      <div class="fullscreen-nav fullscreen-nav-left" id="fullscreen-prev">
        <i class="fa-solid fa-chevron-left"></i>
      </div>
      <div class="fullscreen-image-container">
        <img id="fullscreen-image" src="" alt="Fullscreen view" />
        <div class="fullscreen-counter" id="fullscreen-counter">1 / 1</div>
      </div>
      <div class="fullscreen-nav fullscreen-nav-right" id="fullscreen-next">
        <i class="fa-solid fa-chevron-right"></i>
      </div>
    </div>
  </body>
</html>
